
VERSION=2.12
CC=gcc
CFLAGS += -std=gnu99 -g -I.. -Wall -L..
CFLAGS += -Wno-int-to-void-pointer-cast
LDFLAGS=-L.. -v
LIB=-lusloss$(VERSION)
TESTS = $(patsubst %.c,%,$(wildcard *.c))

ifeq ($(shell uname),Darwin)
	CFLAGS += -D_XOPEN_SOURCE
	OS = macosx
else
	OS = linux
endif

all: $(TESTS)

$(TESTS) : %: %.c ../libusloss$(VERSION).a
	$(CC) $(CFLAGS) $< -o $@ $(LIB)

clean:
	rm -f *.o $(TESTS) core* term?.out
